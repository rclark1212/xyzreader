<android.support.design.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <!-- the scrollable data -->
    <android.support.v4.widget.NestedScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        app:layout_behavior="@string/appbar_scrolling_view_behavior" >
        <LinearLayout
            android:orientation="vertical"
            android:layout_width="match_parent"
            android:layout_height="match_parent">
            <LinearLayout
                android:id="@+id/meta_bar"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="#333"
                android:layout_gravity="bottom"
                android:orientation="vertical"
                android:paddingStart="@dimen/detail_inner_horiz_margin"
                android:paddingLeft="@dimen/detail_inner_horiz_margin"
                android:paddingEnd="@dimen/detail_inner_horiz_margin"
                android:paddingRight="@dimen/detail_inner_horiz_margin"
                android:paddingTop="@dimen/detail_metabar_vert_padding"
                android:paddingBottom="@dimen/detail_metabar_vert_padding"
                android:layout_marginBottom="@dimen/detail_metabar_vert_padding">

                <TextView
                    android:id="@+id/article_title"
                    style="?android:attr/textAppearanceLarge"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:paddingBottom="@dimen/detail_metabar_title_bottom_padding"
                    android:textColor="#fff"
                    android:textStyle="bold"
                    android:textSize="@dimen/detail_title_text_size"
                    android:lineSpacingMultiplier="0.9" />
                    <!-- don't change font family - delete android:fontFamily="sans-serif-condensed" -->

                <TextView
                    android:id="@+id/article_byline"
                    style="?android:attr/textAppearanceSmall"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:textColor="#8fff" />
            </LinearLayout>

            <!-- fix a nasty transition bug with nexus5. It turns out that assigning an autolink:web
                property to a text view causes a fade transition on that text view to fail for some devices
                with a deadobject. Behavioral observations:
                nexus9, nexus6 worked fine with autolink on view below and fade enabled
                nexus5 failed with a deadobject
                reviewed sharedelement structures in both cases - they matched
                if you disabled fade transition on body text (exclude in transition resource), runs fine on n5
                if you remove autolink on control (and enabled fade), runs fine on n5
                Theory is there is a timing/race condition present with n5 on M (tested with M).

            -->
            <TextView
                android:id="@+id/article_body"
                style="?android:attr/textAppearanceMedium"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:paddingTop="@dimen/detail_body_top_margin"
                android:layout_marginStart="@dimen/detail_inner_horiz_margin"
                android:layout_marginLeft="@dimen/detail_inner_horiz_margin"
                android:layout_marginEnd="@dimen/detail_inner_horiz_margin"
                android:layout_marginRight="@dimen/detail_inner_horiz_margin"
                android:paddingBottom="@dimen/detail_body_bottom_margin"
                android:textSize="@dimen/detail_body_text_size"
                android:lineSpacingMultiplier="@fraction/detail_body_line_spacing_multiplier" />

        </LinearLayout>
    </android.support.v4.widget.NestedScrollView>

    <!-- and the photo -->
    <android.support.design.widget.AppBarLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="?colorPrimary">
        <android.support.design.widget.CollapsingToolbarLayout
            android:layout_width="match_parent"
            android:layout_height="@dimen/detail_photo_height"
            android:fitsSystemWindows="true"
            app:layout_scrollFlags="scroll|exitUntilCollapsed">

            <ImageView
                android:id="@+id/photo"
                android:layout_width="match_parent"
                android:layout_height="@dimen/detail_photo_height"
                android:layout_gravity="center"
                android:scaleType="centerCrop"
                app:layout_collapseMode="parallax"
                android:contentDescription="@string/story_photo" />

        </android.support.design.widget.CollapsingToolbarLayout>
    </android.support.design.widget.AppBarLayout>

    <android.support.design.widget.FloatingActionButton
        app:fabSize="normal"
        app:elevation="@dimen/fab_elevation"
        app:pressedTranslationZ="@dimen/fab_press_translation_z"
        android:id="@+id/share_fab"
        app:layout_anchor="@id/meta_bar"
        app:layout_anchorGravity="bottom|end|right"
        android:src="@drawable/ic_share"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_margin="@dimen/fab_margin"
        android:contentDescription="@string/action_share" />

</android.support.design.widget.CoordinatorLayout>

